{% extends "tickets/_base_ticket.html" %}

{% set form_action = "/tickets" %}
{% set alpine_component = "hardwareCreateForm()" %}

{% block hidden_fields %}
<input type="hidden" name="ticket_type" value="hardware">
<input type="hidden" name="description" x-ref="description">
{% endblock %}

{% block ticket_details %}
  {% include "tickets/partials/_ticket_details.html" %}
{% endblock %}

{% block ticket_fields %}
  {% include "tickets/hardware/_form_fields.html" %}
{% endblock %}

{% block ticket_actions %}
  {% include "tickets/partials/_ticket_actions.html" %}
{% endblock %}

{% block extra_js %}
<script>
function hardwareCreateForm() {
  return {
    ...baseForm(),
    phase: "create",
    isCreate: true,

    submitHardware(payload) {
      this.$refs.description.value = JSON.stringify(payload, null, 2);
      this.$el.submit();
    }
  }
}
</script>
{% endblock %}
