<section class="flex-1 bg-white dark:bg-gray-800 border rounded-xl shadow p-8 space-y-12">

  <!-- ================================================= -->
  <!-- A. MIETE -->
  <!-- ================================================= -->
  <div>
    <h2 class="text-xl font-semibold text-primary mb-4">
      Miete / Niederlassung
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <div>
        <label>Ort der Niederlassung</label>
        <input
          x-model="miete.location"
          :class="inputClass('location', miete.location)"
        >
      </div>

      <div>
        <label>Firma der Niederlassung</label>
        <select
          x-model="miete.company"
          :class="inputClass('company', miete.company)"
        >
          <option value="">Bitte wÃ¤hlen</option>
          <template x-for="company in companies" :key="company">
            <option :value="company" x-text="company"></option>
          </template>
        </select>
      </div>

      <div>
        <label>WiedererÃ¶ffnung?</label>
        <select
          x-model="miete.reopening"
          :class="inputClass('reopening', miete.reopening)"
        >
          <option value="">â€“</option>
          <option>Ja</option>
          <option>Nein</option>
        </select>
      </div>

      <!-- âœ… NEU: Klingel / Eingang sichtbar -->
      <div>
        <label>Firma bereits an der Klingel / am Eingang sichtbar?</label>
        <select
          x-model="miete.sign_visible"
          :class="inputClass('sign_visible', miete.sign_visible)"
        >
          <option value="">â€“</option>
          <option>Ja</option>
          <option>Nein</option>
        </select>

        <template x-if="miete.sign_visible === 'Nein'">
          <p class="mt-1 text-xs text-amber-700 dark:text-amber-400">
            ðŸ“Œ Bitte Zettel oder Ã¤hnliches an Klingel / Eingang anbringen.
          </p>
        </template>
      </div>

      <!-- Vorgesetzter -->
      <div :class="shellClass('location_supervisor_id', getValue('location_supervisor_id'))">
        {% set label = "Vorgesetzter der Niederlassung" %}
        {% set field_id = "location_supervisor_id" %}
        {% set field_name = "location_supervisor_name" %}

        {% set initial_id = description.miete.location_supervisor_id
            if description and description.miete is defined else "" %}
        {% set initial_name = description.miete.location_supervisor_name
            if description and description.miete is defined else "" %}

        {% include "components/user-dropdown.html" %}
      </div>

      <!-- Ansprechpartner -->
      <div :class="shellClass('contact_person_id', getValue('contact_person_id'))">
        {% set label = "Ansprechpartner fÃ¼r RÃ¼ckfragen" %}
        {% set field_id = "contact_person_id" %}
        {% set field_name = "contact_person_name" %}

        {% set initial_id = description.miete.contact_person_id
            if description and description.miete is defined else "" %}
        {% set initial_name = description.miete.contact_person_name
            if description and description.miete is defined else "" %}

        {% include "components/user-dropdown.html" %}
      </div>

      <div>
        <label>Kostenstelle</label>
        <input
          type="text"
          inputmode="numeric"
          x-model="miete.cost_center"
          @input="miete.cost_center = ($event.target.value || '').replace(/\D/g,'')"
          :class="inputClass('cost_center', miete.cost_center)"
        >
      </div>

      <div>
        <label>Startdatum</label>
        <input
          type="date"
          x-model="miete.start_date"
          :class="inputClass('start_date', miete.start_date)"
        >
      </div>

      <div class="md:col-span-2">
        <label>Adresse</label>
        <textarea
          x-model="miete.address"
          :class="inputClass('address', miete.address)"
          class="h-24"
        ></textarea>
      </div>

    </div>
  </div>

  <!-- ================================================= -->
  <!-- B. IT -->
  <!-- ================================================= -->
  <div>
    <h2 class="text-xl font-semibold text-primary mb-4">
      IT
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <div>
        <label>Serverschrank vorhanden?</label>
        <select
          x-model="it.server_rack"
          :class="inputClass('server_rack', it.server_rack)"
        >
          <option value="">â€“</option>
          <option>Ja</option>
          <option>Nein</option>
        </select>
      </div>

      <div>
        <label>Netzwerkverkabelung</label>
        <input
          type="text"
          x-model="it.network_cabling"
          :class="inputClass('network_cabling', it.network_cabling)"
          placeholder="z. B. Cat 6, Cat 7"
        >
      </div>

      <!-- âœ… Text angepasst: Frage exakt wie gewÃ¼nscht -->
      <div>
        <label>Ist im BÃ¼ro bereits eine DSL- oder Glasfaser-Dose installiert?</label>
        <select
          x-model="it.line_installed"
          :class="inputClass('line_installed', it.line_installed)"
        >
          <option value="">â€“</option>
          <option>Ja</option>
          <option>Nein</option>
        </select>
      </div>

      <!-- Wenn JA: Art + Ort -->
      <template x-if="it.line_installed === 'Ja'">
        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label>Welche Art / Anschluss?</label>
            <select
              x-model="it.line_type"
              :class="inputClass('line_type', it.line_type)"
            >
              <option value="">Bitte wÃ¤hlen</option>
              <option>DSL</option>
              <option>Glasfaser</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label>Wo befindet sie sich?</label>
            <textarea
              x-model="it.line_location"
              :class="inputClass('line_location', it.line_location)"
              class="h-20"
              placeholder="z. B. Glasfaser-Dose im Technikraum EG, linke Wand"
            ></textarea>
          </div>
        </div>
      </template>

      <!-- Wenn NEIN: Vermieter beauftragen + Vermieter-Daten -->
      <template x-if="it.line_installed === 'Nein'">
        <div class="md:col-span-2 space-y-4">
          <div class="rounded-lg border border-amber-300 dark:border-amber-600 bg-amber-50 dark:bg-amber-900/20 p-4 text-sm">
            <strong>ðŸ“Œ Hinweis:</strong>
            Vermieter wird mit der Installation beauftragt
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label>Vermieter â€“ Name</label>
              <input
                x-model="it.landlord_name"
                :class="inputClass('landlord_name', it.landlord_name)"
                placeholder="Name des Vermieters / der Verwaltung"
              >
            </div>

            <div>
              <label>Vermieter â€“ Kontaktdaten (Telefon oder E-Mail)</label>
              <input
                x-model="it.landlord_contact"
                :class="inputClass('landlord_contact', it.landlord_contact)"
                placeholder="z. B. 01234 56789 oder vermieter@firma.de"
              >
            </div>
          </div>
        </div>
      </template>

    </div>
  </div>

  <!-- ================================================= -->
  <!-- C. MARKETING -->
  <!-- ================================================= -->
  <div>
    <h2 class="text-xl font-semibold text-primary mb-4">
      Marketing
    </h2>

    <div>
      <label>Ã–ffnungszeiten der Niederlassung</label>
      <textarea
        x-model="m.opening_hours"
        :class="inputClass('opening_hours', m.opening_hours)"
        class="h-24"
        placeholder="z.B. Moâ€“Fr 08:00â€“17:00"
      ></textarea>
    </div>
  </div>

  <!-- ================================================= -->
  <!-- D. FUHRPARK -->
  <!-- ================================================= -->
  <div>
    <h2 class="text-xl font-semibold text-primary mb-4">
      Fuhrpark
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <div>
        <label>Poolfahrzeuge benÃ¶tigt?</label>
        <select
          x-model="f.pool_cars"
          :class="inputClass('pool_cars', f.pool_cars)"
        >
          <option value="">â€“</option>
          <option>Ja</option>
          <option>Nein</option>
        </select>
      </div>

      <template x-if="f.pool_cars === 'Ja'">
        <div>
          <label>BenÃ¶tigt ab</label>
          <input
            type="date"
            x-model="f.pool_cars_from"
            :class="inputClass('pool_cars_from', f.pool_cars_from)"
          >
        </div>
      </template>

    </div>
  </div>

</section>
